# RansacCircleFitting

```markdown
# RANSAC 기반 원형 피팅 (C++)

본 코드는 C++와 OpenCV를 이용하여 이미지 내 원형 객체를 피팅하고 분석하는 RANSAC 기반의 접근 방식을 구현합니다.

## 1. 개요

- **목표:** 이미지에서 검출된 윤곽선을 이용하여 원형 객체를 피팅하고 관련 파라미터를 분석합니다.
- **핵심 기능:**
    - OpenCV를 이용한 이미지 처리 및 윤곽선 검출
    - 타원 및 최소 외접원 피팅을 통한 원형 특징 추출 (중심점, 반지름, 장/단축 등)
    - 조건부 이미지 전처리 (Unsharp Mask)
    - 검출 결과 시각화 (바운딩 박스, 중심점, 외접원)

## 2. 주요 코드 구조

- **헤더 포함:** OpenCV 및 표준 C++ 라이브러리 포함
- **전방 선언:** 사용되는 함수들의 선언
- **`Points` 클래스:** 2D 좌표 저장을 위한 간단한 클래스
- **거리 계산 함수:** 점들 간의 유클리드 거리 계산
- **`ScalePoint` 함수:** 점을 기준으로 스케일링된 새로운 점 계산
- **`getRadian` 함수:** 각도에서 라디안으로 변환
- **`cvImgShow` 함수:** OpenCV Mat 객체 시각화
- **`timerCout` 함수:** 실행 시간 측정 및 출력
- **`main` 함수:**
    - 이미지 로드 및 전처리
    - 윤곽선 검출
    - 검출된 윤곽선에 대한 타원 피팅 및 최소 외접원 계산
    - 중심점, 반지름, 장/단축 반지름 등 특징 추출 및 저장
    - 특정 조건에 따른 추가 분석 및 시각화
    - 결과 이미지 저장 및 출력

## 3. 사용 라이브러리

- **OpenCV (`opencv2/opencv.hpp`):** 이미지 처리, 윤곽선 검출, 도형 피팅 등
- **표준 C++ 라이브러리 (`iostream`, `vector`, `cmath`, `algorithm` 등):** 기본 입출력, 컨테이너, 수학 함수 등

## 4. 실행 방법

1. C++ 컴파일러 및 OpenCV 개발 환경 구성
2. `main` 함수 내 이미지 경로 (`"d:\\temp1.bmp"`)를 실제 이미지 파일 경로로 수정
3. 코드를 컴파일 및 실행
4. 결과 이미지는 `"d:\\temps.bmp"`로 저장되고, 화면에 시각화된 결과가 표시됨

## 5. 추가 정보

- 코드 내 `isEven` 변수를 통해 조건부 이미지 전처리 활성화/비활성화 가능
- 윤곽선 면적 필터링 (`area < 70000`)를 통해 특정 크기 이하의 노이즈 제거
- 타원 피팅 및 최소 외접원 정보를 이용하여 원형 객체의 특징 분석

본 코드는 이미지 내 원형 객체를 검출하고 기본적인 특징들을 추출하는 데 초점을 맞추고 있습니다. RANSAC 알고리즘의 직접적인 구현보다는 OpenCV의 도형 피팅 기능을 활용하여 원형 객체를 분석하기 위한 코드입니다.
```

<img width="632" alt="KakaoTalk_Photo_2023-07-30-19-17-59" src="https://github.com/CVKim/RansacCircleFitting/assets/90014998/1f6e5f2a-1f9a-4961-85bd-e60c74f1c858">
